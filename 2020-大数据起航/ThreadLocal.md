#  概述

从 Java 官方文档描述：ThreadLocal 用来提供线程内部的局部变量。

这种局部变量在多线程环境下访问(通过get和set方法)时能保证各个线程的变量独立。

ThreadLocal 实例通常来说都是 private static 类型的，用于关联线程和线程上下文。

我们可以得知 ThreadLocal  的作用 是：提供线程内的局部变量，不同线程之间不会相互干扰，

该变量在线程生命周期内起作用，减少同一个线程内多个函数或组件之间变量传递的复杂度。

总结：

1. 线程并发： 多线程并发的场景下
2. 传递数据：可以通过 ThreadLocal  变量在同一个线程的不同组件和函数中传递公共变量
3. 线程隔离：每个线程的变量都是独立的，不会相互影响

#  对比 synchronized

synchronized : 采用同步机制，让线程排队访问共享变量

ThreadLocal ：采用空间换时间的方式，为每一个线程提供了不同的变量。

因此 ThreadLocal 能够显著的提高系统的并发性。

https://www.bilibili.com/video/BV1N741127FH?p=11

为什么 key 使用弱引用

为什么有内存泄漏的问题以及如何避免？